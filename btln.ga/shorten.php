<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>BitLinker - 登録不要のカスタム短縮URL作成サービス</title>
  <link rel="shortcut icon" href="./icon.ico">
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="./main.css">
  <link rel="stylesheet" href="./input.css">
  <link rel="stylesheet" href="./submit.css">
  <link rel="stylesheet" href="./footer.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- JavaScript -->
  <script type="text/javascript" src="./input.js"></script>
  <!-- Googleフォント -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@300&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Yusei+Magic&display=swap" rel="stylesheet">
  <!-- Googleアドセンス -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7363201401295069" crossorigin="anonymous"></script>
  <script data-ad-client="ca-pub-7363201401295069" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- OGP設定 -->
  <meta property="og:title" content="BitLinker - 登録不要のカスタム短縮URL作成サービス">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.bitlinker.ga">
  <meta property="og:image" content="https://www.bitlinker.ga/logo.png">
  <meta property="og:site_name" content="BitLinker - 登録不要のカスタム短縮URL作成サービス">
  <meta property="og:description" content="完全無料＆登録不要で btln.ga/ から始まるカスタム短縮URLを作成することができます。SSL（https://~）対応＆全データ日本国内にあるサーバーで厳重に保管されているため、安心してお使いいただけます！">
  <!-- Twitterカード -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@sekaino_usay">
  <meta property="og:url" content="https://www.bitlinker.ga">
  <meta property="og:title" content="BitLinker - 登録不要のカスタム短縮URL作成サービス">
  <meta property="og:description" content="完全無料＆登録不要で btln.ga/ から始まるカスタム短縮URLを作成することができます。SSL（https://~）対応＆全データ日本国内にあるサーバーで厳重に保管されているため、安心してお使いいただけます！">
  <meta property="og:image" content="https://www.bitlinker.ga/logo.png">
</head>

<body>
  <!-- アクセス解析 -->
  <script src="//accaii.com/bitlinker/script.js" async></script>
  <noscript><img src="//accaii.com/bitlinker/script?guid=on"></noscript>

  <!-- ナビゲーション -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: #83cc97;">
    <div class="container-xl">

      <a class="navbar-brand" href="./index.php">
        <img src="./img/logo.png" height="50">
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample07XL" aria-controls="navbarsExample07XL" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExample07XL">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

          <li class="nav-item active">
            <a class="nav-link" aria-current="page" href="https://www.bitlinker.ga/index.php">ホーム</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://www.bitlinker.ga/about.php">BitLinkerについて</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://www.bitlinker.ga/reviews.php">利用者様の声</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown07XL" data-bs-toggle="dropdown" aria-expanded="false">セキュリティ</a>
            <ul class="dropdown-menu" aria-labelledby="dropdown07XL">
              <li><a class="dropdown-item" href="https://www.bitlinker.ga/bug_report.php">バグ・脆弱性報告</a></li>
              <li><a class="dropdown-item" href="https://www.bitlinker.ga/url_report.php">短縮URL報告</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown07XL" data-bs-toggle="dropdown" aria-expanded="false">ご利用にあたって</a>
            <ul class="dropdown-menu" aria-labelledby="dropdown07XL">
              <li><a class="dropdown-item" href="https://www.bitlinker.ga/terms.php">利用規約</a></li>
              <li><a class="dropdown-item" href="https://www.bitlinker.ga/disclaimer.php">免責事項</a></li>
              <li><a class="dropdown-item" href="https://www.bitlinker.ga/privacy_policy.php">プライバシーポリシー</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://www.bitlinker.ga/contact.php">お問い合わせ</a>
          </li>

        </ul>
      </div>
    </div>
  </nav>

  <!-- コンテンツ -->
  <div class="flex">
    <div class="flex_img">
      <img src="./img/done.svg">
    </div>
    <div class="flex_txt">
      <h1>短縮結果</h1>
      <br>

      <?php
//POST元の判定
$host  = $_SERVER['HTTP_REFERER'];
$str   = parse_url($host);
$check = 'bad';
if (stristr($str['host'], "www.bitlinker.ga")) {
    $check = 'ok';
}

//URL作成処理関数化
function shorten()
{
    //キーワード
    $keyword = $_POST['keyword'];

    //元URL
    $ex_url = $_POST['url'];

    //短縮後URL
    $your_url = "https://btln.ga/" . $_POST['keyword'];

    //パス
    $path = "./" . $_POST['keyword'];
    //キーワードが使えるか調べる・正規表現で入力文字制限
    if (file_exists($path)) {
        echo('<p>https://btln.ga/' . $keyword . 'は使用できません。</p>');
    } elseif (preg_match("/^[一-龠ぁ-んーァ-ヶー0-9０-９a-zａ-ｚA-ZＡ-Ｚ\-_\.]+$/u", $keyword)) {
        mkdir($keyword);
        echo('<p>作成された短縮URLは、' . $your_url . 'です。</p>');
        echo('<br>');
        echo('<a href="' . $your_url . '" target="_blank">' . $your_url . '</a>');
        echo('<br>');

        //URLコピーボタン
        echo('<br><input id="copyTarget" type="text" value="' . $your_url . '" readonly>');
        echo('<button onclick="copyToClipboard()">Copy URL</button>');

        //index.phpファイルにリダイレクト内容を書き込み
        file_put_contents(
            $keyword . '/index.php',
            '<?php
  header("Location: ' . $ex_url . '", true, 302);
  exit;
  ?>'
      );
      } else {
      echo('<p>URLを発行できません。<br>短縮前のURLが正しい形式で入力されているか確認して下さい。<br>「キーワード」に使用できる文字は、半角英数字・全角ひらがな・全角カタカナ・漢字・-（ハイフン）・_（アンダーバー）.(ドット)です。</p>');
      }
      }

      //POST元がwww.bitlinker.gaだったら短縮URLを作成
      if ($check == 'ok') {
      shorten();
      } else {
      echo('<p>' . $host . 'から短縮URLを作成しようとしています。<a href="https://www.bitlinker.ga">www.bitlinker.ga</a>から作成してください。</p>');
      }
      ?>

      <!--URLコピーボタン-->
      <script>
        function copyToClipboard() {
          //コピー対象をJavaScript上で変数として定義する
          var copyTarget = document.getElementById("copyTarget");

          //コピー対象のテキストを選択する
          copyTarget.select();

          //選択しているテキストをクリップボードにコピーする
          document.execCommand("Copy");

          //コピーをお知らせする
          alert("コピーしました！: " + copyTarget.value);
        }
      </script>
      <br><br>
      <a href="https://www.bitlinker.ga"><input type="submit" value="戻る" class="button"></a>
    </div>
  </div>

  <hr>

  <div class="flex">
    <div class="flex_txt">
      <h1>「利用者様の声」をお寄せ下さい！</h1>
      <br>
      <p>BitLinkerサイトデザインの変更に伴い、「利用者様の声」ページを新たに作成しています。
        <br>そこで、実際に使用して頂いている方からコメントを募集しております。
        <br>以下のフォーム（Googleフォームに飛びます）へ是非、コメントをお寄せ下さい！
        <br>ご協力、よろしくお願いします！
      </p>
      <p><a href="https://docs.google.com/forms/d/e/1FAIpQLSfBwZ-GHi1mQDMgaxXdH_HRsQY6riuJ_sc_JXfE2mWPPxiW2A/viewform?usp=sf_link" target="_blank">「利用者様の声」募集フォーム</a></p>
    </div>
    <div class="flex_img">
      <img src="./img/notify.svg">
    </div>
  </div>

  <!-- 広告 -->
  <!-- Moons APPS ad start -->
  <script class="moons_apps_ad_banner moons_apps_ad_auto" src="https://apps.moons14.com/ad/js/banner.js"></script>
  <!-- Moons APPS ad end -->

  <hr>

  <!-- フッター -->
  <div class="container">
    <footer class="py-5">
      <div class="row">
        <div class="col-2">
          <h5>メイン</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/index.php" class="nav-link p-0 text-muted">ホーム</a></li>
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/about.php" class="nav-link p-0 text-muted">BitLinkerについて</a></li>
            <!-- <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/reviews.php" class="nav-link p-0 text-muted">利用者様の声</a></li> -->
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/contact.php" class="nav-link p-0 text-muted">お問い合わせ</a></li>
          </ul>
        </div>

        <div class="col-2">
          <h5>セキュリティ</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/bug_report.php" class="nav-link p-0 text-muted">バグ・脆弱性報告</a></li>
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/url_report.php" class="nav-link p-0 text-muted">短縮URL報告</a></li>
            <!-- <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">ホワイトハッカー</a></li> -->
          </ul>
        </div>

        <div class="col-2">
          <h5>ご利用にあたって</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/terms.php" class="nav-link p-0 text-muted">利用規約</a></li>
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/disclaimer.php" class="nav-link p-0 text-muted">免責事項</a></li>
            <li class="nav-item mb-2"><a href="https://www.bitlinker.ga/privacy_policy.php" class="nav-link p-0 text-muted">プライバシーポリシー</a></li>
          </ul>
        </div>

        <div class="col-4 offset-1">
          <a href="./index.php"><img src="./img/logo.png" width="100%"></a>
          <br><br>
          <p>© 2021 <a href="https://profile.u-say.ga/" target="_blank">U_SAY</a> All Rights Reserved.</p>

          <div class="container">
            <div class="row align-items-center">
              <div class="col">
                <p>Illustrations by <a href="https://storyset.com" target="_blank">Storyset</a></p>
              </div>
              <div class="col">
                <ul class="follow-me">
                  <li><a href="https://twitter.com/sekaino_usay" target="_blank"></a></li>
                  <li><a href="https://github.com/sekaino-usay" target="_blank"></a></li>
                </ul>
              </div>
            </div>
          </div>

        </div>
      </div>
    </footer>
  </div>
</body>

</html>
